<div class="px-8 mx-auto max-w-7xl lg:flex lg:gap-x-16">
  <%= render partial: 'shared/profile_sidebar' %>
  <main class="my-8 lg:flex-auto">
    <div>
      <h2 class="text-base font-semibold leading-7 text-gray-900">Reservations & Payments</h2>
    </div>
    <div class="flex flex-col">
      <% @reservations.each do |reservation| %>
        <div class="p-6 mt-4 border border-gray-300 rounded-xl h-min">
          <div class="flex justify-between gap-x-4">
            <%= render 'properties/thumbnail', property: reservation.property %>
            <% if reservation.review.nil? %>
              <%= button_to "Add Review", new_reservation_review_path(reservation), method: :get, class: "flex-1 text-nowrap mt-4 rounded-md border border-transparent bg-primary px-8 py-3 text-base font-medium text-white hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" %>
            <% end %>
          </div>
          <div class="relative py-4">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
          </div>
          <!-- my review if there is any -->
          <% if reservation.review.present? %>
            <p class="text-base font-normal"><span>My review: </span> "<%= reservation.review.content %>"</p>
            <div class="relative py-4">
              <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-gray-300"></div>
              </div>
            </div>
          <% end %>
          <!-- price details -->
          <div class="py-6">
            <h3 class="text-xl font-medium text-gray-900">Price details</h3>
            <div class="flex justify-between mt-4 font-light">
              <p><%= humanized_money_with_symbol reservation.payment.unit_price %> x <span ><%= (reservation.checkout_date - reservation.checkin_date).to_i %></span> <%= "night".pluralize((reservation.checkout_date - reservation.checkin_date).to_i) %></p>
              <p><span ><%= humanized_money_with_symbol reservation.payment.base_fare %></span></p>
            </div>
            <div class="flex justify-between mt-4 font-light">
              <p>Airbnb service fee</p>
              <p><span ><%= humanized_money_with_symbol(reservation.payment.service_fee) %></span></p>
            </div>
          </div>
          <div class="relative py-4">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
          </div>
          <!-- trip details -->
          <div class="py-6">
            <h3 class="text-xl font-medium text-gray-900">Trip details</h3>
            <div class="flex justify-between mt-4 font-light">
              <p>Dates</p>
              <p><%= reservation.checkin_date %> ~ <%= reservation.checkout_date %></p>
            </div>
          </div>
          <div class="relative py-4">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
          </div>
          <div class="flex justify-between font-medium">
            <p>Total</p>
            <p><span ><%= humanized_money_with_symbol reservation.payment.total_before_taxes %></span></p>
          </div>
        </div>
      <% end %>
    </div>
  </main>
</div>